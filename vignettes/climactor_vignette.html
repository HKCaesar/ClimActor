<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Data-Driven Lab" />


<title>The climactor guide</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">The climactor guide</h1>
<h4 class="author">Data-Driven Lab</h4>



<p>As more non-state actors commit to climate action, new initiatives and databases recording such commitments have also become more commonplace. Many actors commit to multiple initiatives and appear in more than one database, yet show up across databases with slightly different names. This discrepancy makes data cleaning and wrangling more difficult than it should be and can result in over-counting of actor’s climate commitments if not dealt with appropriately.</p>
<p>The  package provides a workflow to efficiently standardize actor names across different databases and clean climate commitment data when analyzing non-state actors’ climate commitments.</p>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The data used in this vignette comes from the Carbon Disclosure Project’s 2018-2019 City-wide emissions data. The data can be downloaded <a href="https://data.cdp.net/Emissions/2018-2019-City-wide-emissions/k7qn-m6i9">here</a>. Metadata of the dataset is also documented in the link above.</p>
<p>With data read in (as <code>cdp</code>)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">dim</span>(cdp)</a></code></pre></div>
<pre><code>## [1] 1299   34</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Quick peek at the data</span></a>
<a class="sourceLine" id="cb3-2" title="2">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(cdp[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">X.U.FEFF.Year.Reported.to.CDP</th>
<th align="right">Account.Number</th>
<th align="left">Organization</th>
<th align="left">City</th>
<th align="left">Country</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2018</td>
<td align="right">60207</td>
<td align="left">City of Windhoek</td>
<td align="left">Windhoek</td>
<td align="left">Namibia</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="right">60340</td>
<td align="left">Prefeitura de Rio Verde</td>
<td align="left">Rio Verde</td>
<td align="left">Brazil</td>
</tr>
<tr class="odd">
<td align="right">2018</td>
<td align="right">73282</td>
<td align="left">Municipality of Ilha de Mozambique</td>
<td align="left">Ilha</td>
<td align="left">Mozambique</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="right">840313</td>
<td align="left">Municipalidad Cerro Navia</td>
<td align="left"></td>
<td align="left">Chile</td>
</tr>
<tr class="odd">
<td align="right">2018</td>
<td align="right">831231</td>
<td align="left">Kasama Municipal Council</td>
<td align="left">Kasama</td>
<td align="left">Zambia</td>
</tr>
<tr class="even">
<td align="right">2018</td>
<td align="right">59697</td>
<td align="left">City of Lake Worth, FL</td>
<td align="left">Lake Worth</td>
<td align="left">United States of America</td>
</tr>
</tbody>
</table>
<p>Apart from the data you wish to clean, two other important datasets would be the key dictionary (<code>key_dict</code>) and country dictionary (<code>country_dict</code>). These datasets can be accessed once the <code>climactor</code> package has been called with either <code>library(climactor)</code> or <code>require(climactor)</code>. For more details on the two dictionaries, you can use <code>?key_dict</code> and <code>?country_dict</code> for the full data documentation.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(key_dict[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">right</th>
<th align="left">wrong</th>
<th align="left">iso</th>
<th align="left">entity.type</th>
<th align="left">allcaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Lassee</td>
<td align="left">Lassee</td>
<td align="left">AUT</td>
<td align="left">City</td>
<td align="left">LASSEE</td>
</tr>
<tr class="even">
<td align="left">Laxenburg</td>
<td align="left">Laxenburg</td>
<td align="left">AUT</td>
<td align="left">City</td>
<td align="left">LAXENBURG</td>
</tr>
<tr class="odd">
<td align="left">Antwerp</td>
<td align="left">Antwerp</td>
<td align="left">BEL</td>
<td align="left">City</td>
<td align="left">ANTWERP</td>
</tr>
<tr class="even">
<td align="left">Bruxelles-Capitale</td>
<td align="left">Bruxelles-Capitale</td>
<td align="left">BEL</td>
<td align="left">City</td>
<td align="left">BRUXELLES-CAPITALE</td>
</tr>
<tr class="odd">
<td align="left">Genk</td>
<td align="left">Genk</td>
<td align="left">BEL</td>
<td align="left">City</td>
<td align="left">GENK</td>
</tr>
<tr class="even">
<td align="left">Ghent</td>
<td align="left">Gent</td>
<td align="left">BEL</td>
<td align="left">City</td>
<td align="left">GENT</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(country_dict[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">wrong</th>
<th align="left">right</th>
<th align="right">code</th>
<th align="left">iso</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Guinea Bissau</td>
<td align="left">Guinea-Bissau</td>
<td align="right">624</td>
<td align="left">GNB</td>
<td align="left">Sub-Saharan Africa</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Afghanistan</td>
<td align="right">4</td>
<td align="left">AFG</td>
<td align="left">South Asia</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Albania</td>
<td align="right">8</td>
<td align="left">ALB</td>
<td align="left">Eastern Europe and Central Asia</td>
</tr>
<tr class="even">
<td align="left">Algeria</td>
<td align="left">Algeria</td>
<td align="right">12</td>
<td align="left">DZA</td>
<td align="left">Middle East and North Africa</td>
</tr>
<tr class="odd">
<td align="left">American Samoa</td>
<td align="left">American Samoa</td>
<td align="right">16</td>
<td align="left">ASM</td>
<td align="left">East Asia and the Pacific</td>
</tr>
<tr class="even">
<td align="left">Andorra</td>
<td align="left">Andorra</td>
<td align="right">20</td>
<td align="left">AND</td>
<td align="left">Europe</td>
</tr>
</tbody>
</table>
</div>
<div id="data-preparation-functions" class="section level2">
<h2>Data Preparation functions</h2>
<p>Naturally, the first step in any data cleaning pipeline would be to read in and prepare the data.</p>
<p>Within the <code>climactor</code> workflow the first important step comes when the data is read in. For the later string matching aspects of the workflow to work more accurately, the data should ideally be read in or converted to <strong>UTF-8</strong> encoding. <strong>UTF-8</strong> is the preferred encoding when working with strings and both the <code>key_dict</code> and <code>country_dict</code> are encoding in UTF-8 encoding. Reading in data with the UTF-8 encoding can be done by using the <code>encoding</code> argument within the <code>read.csv</code> function.</p>
<p>If you know the encoding of your data, it is best to convert it to UTF-8 (either within R or elsewhere) before proceeding with the string matching algorithmns. If you are unsure of the encoding of your data, an (optional) helper function within some string matching functions will try to guess the encoding of your data and convert it to UTF-8. For more information on the helper function, see the code in the github <a href="https://github.com/datadrivenyale/climactor/blob/master/R/helper_functions.R">here</a>.</p>
<p>If you would like to learn more about encoding in R, you can refer to the Appendix (<em>Notes on encoding</em>) of this vignette or refer to several articles writtin on the topic by <a href="http://kunststube.net/encoding">Kunsttube</a>, <a href="http://kevinushey.github.io/">Kevin Ushey</a>, or <a href="https://rstudio-pubs-static.s3.amazonaws.com/279354_f552c4c41852439f910ad620763960b6.html">Maurício Collaça</a>.</p>
<p>Other data preparation functions include</p>
<ul>
<li>test</li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
